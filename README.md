# Grants Stack Indexer

The Grants Stack Indexer is a tool that indexes blockchain events generated by [Allo contracts](https://github.com/Allo-Protocol/contracts) and serves the data over HTTP in JSON format. The data is organized in a specific structure that enables easy access to different parts of the protocol. The indexer is built using [Chainsauce](https://github.com/boudra/chainsauce) and is designed to work with any EVM-compatible chain.

The indexer data is used by [Grants Stack](https://github.com/gitcoinco/grants-stack) as a data layer.

## API

Access indexed data through the GraphQL endpoint at: https://grants-stack-indexer.gitcoin.co/graphql/

Use the GraphiQL Playground to see what queries are available: https://grants-stack-indexer.gitcoin.co/graphiql/

Indexed chains are defined in [config.ts](src/config.ts).

## Setup

Copy `.env.example` to `.env`, review and optionally customize it.

To pick chains to index, set `INDEXED_CHAINS` to a comma-separated list of chain identifiers. Available chain identifiers can be found in `src/config.ts`.

## Running in development

```bash
cp .env.example .env
docker-compose up -d
npm install
npm run build

npm run dev
```

## Running in production:

```bash
npm install
npm run build
npm run start
```

Or use the provided `Dockerfile`.

## One-shot operation

To only index data without tracking new events nor starting a server, provide the `--run-once` option:

```
npm run build
npm run start:run-once
```
